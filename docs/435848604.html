<!DOCTYPE html>
<html>
    <head>
        <title>Deep In Motion : 8.1 Internal System Error Detection — Prototype (AI-based Software)</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Deep In Motion</a></span>
                            </li>
                                                    <li>
                                <span><a href="Deep-In-Motion-Home_401868245.html">Deep In Motion Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Index-of-tables_403308818.html">Index of tables</a></span>
                            </li>
                                                    <li>
                                <span><a href="Additional-software-requirements_403308850.html">Additional software requirements</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Deep In Motion : 8.1 Internal System Error Detection — Prototype (AI-based Software)
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
    
        
    
        
        
            Created by <span class='author'> Pål Haugen</span>, last updated on 20.08.2025
    
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p><br/></p><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-1.Purpose&amp;Applicability">1. Purpose &amp; Applicability</h2><p>The manufacturer defines how the software<span> </span><strong>detects</strong><span> </span>and<span> </span><strong>reports</strong><span> </span>internal system errors that could compromise safety or performance. For the<span> </span><strong>prototype</strong>, mechanisms are intentionally lightweight and oriented toward<span> </span><strong>operator-visible notifications</strong><span> </span>and<span> </span><strong>runtime console logging</strong><span> </span>(captured as an audit log), consistent with MDR Annex I (17, 18, 23.4), IEC 62304 (§5.2, §5.3, §7.1), ISO 14971:2019 (§5.4), FDA software validation guidance (e.g., 5.2.2–5.2.4), and GMLP #2 (data integrity).</p><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-2.SystemBoundaries(Prototype)">2. System Boundaries (Prototype)</h2><ul><li data-uuid="cfb1186e-c815-490c-9d8f-79e08e0819da"><strong>Front-end &amp; control layer:</strong><span> </span>Shiny for Python app that manages uploads, launches inference, displays progress, and renders results.</li><li data-uuid="0c4a9288-167b-4cfe-97f9-fbb9ee3bd672"><strong>Back-end processing:</strong><span> </span>Launched via a<span> </span><strong>subprocess</strong><span> </span>to run the model pipeline and XAI generation.</li><li data-uuid="d7b4c3a4-6531-4c33-abbb-223d4b1fadfe"><strong>Artifacts:</strong><span> </span>Temporary and output files (video derivatives, predictions, CSVs) under the project’s<span> </span><code>video_outputs/outputs</code><span> </span>and static directories.</li></ul><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-3.InternalErrorTypes&amp;Detection(PrototypeMechanisms)">3. Internal Error Types &amp; Detection (Prototype Mechanisms)</h2><p>The prototype detects internal failures via explicit checks, exception handling, and fallback rendering paths. Operator-visible notifications and console outputs act as the<span> </span><strong>primary evidence</strong><span> </span>of detection.</p><div class="table-wrap"><table class="wrapped confluenceTable"><colgroup class=""><col class="" style="width: 197.28px;"/><col class="" style="width: 197.28px;"/><col class="" style="width: 197.28px;"/><col class="" style="width: 197.28px;"/></colgroup><thead class=""><tr><th class="confluenceTh">Error category</th><th class="confluenceTh">What can fail</th><th class="confluenceTh">How it is detected (prototype)</th><th class="confluenceTh">Operator-visible effect</th></tr></thead><tbody class=""><tr class=""><td class="confluenceTd"><strong>Input presence</strong></td><td class="confluenceTd">No video uploaded</td><td class="confluenceTd">Guard clause before starting inference</td><td class="confluenceTd">Notification prompting upload; inference not started</td></tr><tr class=""><td class="confluenceTd"><strong>Model selection</strong></td><td class="confluenceTd">Invalid/None model</td><td class="confluenceTd">Guard clause before start</td><td class="confluenceTd">Notification; inference not started</td></tr><tr class=""><td class="confluenceTd"><strong>XAI selection</strong></td><td class="confluenceTd">Invalid/None XAI</td><td class="confluenceTd">Guard clause before start</td><td class="confluenceTd">Notification; inference not started</td></tr><tr class=""><td class="confluenceTd"><strong>Pre-existing results</strong></td><td class="confluenceTd">Missing required outputs</td><td class="confluenceTd">File checks for tracked/XAI/video score files</td><td class="confluenceTd">Analysis proceeds or not; “Video not found” where applicable</td></tr><tr class=""><td class="confluenceTd"><strong>Subprocess/inference</strong></td><td class="confluenceTd">Non‑zero return code / runtime exception</td><td class="confluenceTd"><code>subprocess.Popen</code><span> </span>monitored; exceptions captured</td><td class="confluenceTd">Failure notification with stderr/traceback</td></tr><tr class=""><td class="confluenceTd"><strong>File I/O</strong></td><td class="confluenceTd">Scores/predictions CSVs absent</td><td class="confluenceTd">Existence checks; returns empty DataFrame</td><td class="confluenceTd">“No data available” placeholder and notification</td></tr><tr class=""><td class="confluenceTd"><strong>Data schema</strong></td><td class="confluenceTd">Missing columns (e.g.,<span> </span><code>window_cp_risk</code>)</td><td class="confluenceTd">Defensive checks prior to plotting</td><td class="confluenceTd">“No data available” placeholder</td></tr><tr class=""><td class="confluenceTd"><strong>Rendering</strong></td><td class="confluenceTd">Empty data for plots/widgets</td><td class="confluenceTd">Fallback figures/annotations</td><td class="confluenceTd">Visible “No data available” text</td></tr></tbody></table></div><p><strong>Notes</strong><br/>- Guard clauses and notifications are implemented in the server layer (Shiny reactive handlers).<br/>- Subprocess output and exceptions surface as notifications; all stdout/stderr is available for capture as a<span> </span><strong>runtime audit log</strong><span> </span>in this prototype.</p><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-4.PrototypeEvidencePointers(CodeArtifacts)">4. Prototype Evidence Pointers (Code Artifacts)</h2><ul><li data-uuid="a3e69481-359d-4de5-8d60-4fae0679e59c"><strong>Guard clauses &amp; notifications</strong><span> </span>(upload/model/XAI required; “No data available”; non-zero return code paths):<span> </span><em><code>server.py</code></em><span> </span>(Shiny reactive handlers; subprocess error handling; progress &amp; status notifications).</li><li data-uuid="0a1acc9a-1ba0-4846-bc7e-0869d352ca80"><strong>File existence &amp; data loading checks</strong><span> </span>(videos, XAI videos, tracked output, CSVs; “File not found” prints; empty DataFrame fallback):<span> </span><em><code>datahandler.py</code></em>.</li><li data-uuid="9569c1fb-7aee-441d-bea5-05261297639a"><strong>Fallback rendering</strong><span> </span>(“No data available” plots; safe defaults when data missing):<span> </span><em><code>plots.py</code></em><span> </span>(matplotlib/plotly), used by<span> </span><em><code>server.py</code></em>.</li><li data-uuid="96d94e0a-7167-4cb5-9da6-e2fa109d9f0a"><strong>Smoke/regression tests</strong><span> </span>comparing outputs against reference CSVs (where applicable):<span> </span><em><code>test_outputs.py</code></em>.</li></ul><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-5.PrototypeAuditLogging(OperationalControl)">5. Prototype Audit Logging (Operational Control)</h2><p>Because code changes are not permitted, the<span> </span><strong>audit log</strong><span> </span>for the prototype is derived from<span> </span><strong>process stdout/stderr</strong><span> </span>and<span> </span><strong>operator notifications</strong>: -<span> </span><strong>Collection:</strong><span> </span>Start the app so that console output is<span> </span><strong>captured to a file</strong><span> </span>(e.g., via shell redirection or<span> </span><code>tee</code>).<br/>-<span> </span><strong>Content:</strong><span> </span>Timestamps (from the host shell), progress lines, “PROGRESS_*” markers, error messages, and tracebacks are preserved.<br/>-<span> </span><strong>Retention:</strong><span> </span>Keep logs per session/run with date-time–stamped filenames; rotate older logs per SOP.<br/>-<span> </span><strong>Integrity:</strong><span> </span>For prototype, integrity is procedural (controlled file system and restricted write access). The product version will adopt an append‑only structured log with immutability controls.</p><p>This arrangement satisfies the<span> </span><strong>prototype intent</strong><span> </span>(“Could be an audit log or a monitoring port”) and enables post‑hoc review of internal errors without code modifications.</p><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-6.Monitoring&amp;Health(PrototypeView)">6. Monitoring &amp; Health (Prototype View)</h2><ul><li data-uuid="c7520ab9-8145-4cac-9d9c-67bce6a7994b"><strong>Status variables:</strong><span> </span>Internal<span> </span><code>inference_status ∈ {idle, running, completed}</code><span> </span>and progress updates are surfaced to the UI (progress bar and messages).</li><li data-uuid="bcff7cb7-cfb9-495d-b2a8-298e98558a99"><strong>Operator check:</strong><span> </span>Successful runs display “analysis completed” status and results tabs; failed runs display a notification with error details.</li><li data-uuid="77403d73-1d3f-4892-b62e-c7a3f241d8a0"><strong>Suggested product upgrade:</strong><span> </span>Replace UI-only status with a<span> </span><strong>health/metrics endpoint</strong><span> </span>and structured, rotating logs (append-only JSON) with severity, event, component, and correlation IDs.</li></ul><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-7.LinktoRiskManagement(ISO14971)">7. Link to Risk Management (ISO 14971)</h2><ul><li data-uuid="5283bcd4-c0ae-4d7b-9364-49e792ec38c5"><strong>Hazardous situations addressed in this section:</strong><span> </span>Incorrect or incomplete processing due to internal failures (missing inputs/outputs; subprocess failure; data format issues) leading to<span> </span><strong>misleading results or delayed decisions</strong>.</li><li data-uuid="8a0ecfe8-8ef6-405e-89cf-a46e65df256f"><strong>Risk controls (prototype):</strong><span> </span>Detection via guard clauses, exceptions, file checks, and fallbacks;<span> </span><strong>operator notification</strong><span> </span>prevents silent failures and blocks reliance on incomplete results.</li><li data-uuid="17357ac6-6ac2-450a-bdd5-dc71231b7d0d"><strong>Verification (prototype):</strong><span> </span>Manual review of UI notifications and captured audit logs; optional<span> </span><code>test_outputs.py</code><span> </span>comparisons to reference CSVs where available.</li><li data-uuid="c20f1a7e-d4d7-480e-b1d5-d7b732e4a42f"><strong>Suggested product controls:</strong><span> </span>Structured error taxonomy, automated alerting, test harnesses that deliberately<span> </span><strong>inject failures</strong><span> </span>and verify detection &amp; user-facing mitigation.</li></ul><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-8.AcceptanceCriteria(Prototype)">8. Acceptance Criteria (Prototype)</h2><ul><li data-uuid="6c724510-fb7e-4cad-afe1-5b99124a93b6">Starting an analysis<span> </span><strong>without required inputs</strong><span> </span>is prevented and a<span> </span><strong>notification</strong><span> </span>is shown.</li><li data-uuid="b412e3c0-efe8-47f8-a805-71a2cce7f238">If the inference subprocess fails (non‑zero exit or exception), a<span> </span><strong>failure notification</strong><span> </span>is shown and processing<span> </span><strong>does not continue</strong>.</li><li data-uuid="4ff310ca-e0db-450f-a6d7-5d85e75caa12">If expected files are missing or data is empty/malformed,<span> </span><strong>results views do not present misleading content</strong>; placeholders (“No data available”) are rendered instead.</li><li data-uuid="bcea2ca0-67e5-4cbf-93ef-060b0cdd6b82">The<span> </span><strong>runtime log file</strong><span> </span>for the session contains the above events for later review.</li></ul><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-9.TransitiontoProduct(SuggestedEnhancements)">9. Transition to Product (Suggested Enhancements)</h2><ul><li data-uuid="1cbf0915-78ad-4410-8dc3-9498ab95aaad"><strong>Structured audit log:</strong><span> </span>Append‑only JSON with timestamps, severity, event ID, component, and optional traceback.</li><li data-uuid="1b5190c3-7269-4e04-bc7d-22f8f5fafb34"><strong>Monitoring port:</strong><span> </span>Health endpoint with basic counters (e.g., last error time, errors in last hour, last successful inference).</li><li data-uuid="0739766e-87a7-4340-a392-7d33220e356f"><strong>Model/data provenance:</strong><span> </span>Persist model version, XAI method, input metadata (hash, duration, FPS) alongside outputs.</li><li data-uuid="b1e3cb9b-4ec8-473f-9ec7-19ff4b6ac3cf"><strong>Automated tests:</strong><span> </span>CI job that executes nominal and failure-injection scenarios and asserts detection + safe user messaging.</li><li data-uuid="baa385ab-61f7-463d-845b-9396e39ee5ff"><strong>Integrity:</strong><span> </span>Log immutability (e.g., WORM storage or daily hash-chains) aligned with GMLP #2.</li></ul><hr/><h2 class="anchored" id="id-8.1InternalSystemErrorDetection—Prototype(AIbasedSoftware)-10.ComplianceStatement(Prototype)">10. Compliance Statement (Prototype)</h2><p>The prototype implements<span> </span><strong>pragmatic detection and operator-facing reporting</strong><span> </span>of internal errors through guard clauses, file checks, fallback rendering, and exception surfacing via notifications, with session logs captured from runtime stdout/stderr. This meets the prototype expectation (“should not be in detail”) while establishing a clear path to product-grade monitoring and auditable logging.</p>
                    </div>

                                        
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on 19.09.2025 09:41 CEST</p>
                    <div id="footer-logo"><a href="https://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
